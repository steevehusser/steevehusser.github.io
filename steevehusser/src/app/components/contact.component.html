<section id="contact" class="section contact-section" [class.visible]="visible">
  <div class="container">
    <h2 class="section-title">Contactez-moi</h2>
    <div class="contact-content">
      <form class="contact-form" action="https://formspree.io/f/xgvyanzv" method="POST" (ngSubmit)="onSubmitContact()"
        #contactForm="ngForm">

        <!-- Message de statut -->
        <div *ngIf="submitStatus === 'success'" class="status-message success-message">
          <i class="fas fa-check-circle"></i>
          Merci pour votre message ! Je vous recontacterai bientôt.
        </div>

        <div *ngIf="submitStatus === 'error'" class="status-message error-message">
          <i class="fas fa-exclamation-circle"></i>
          Une erreur s'est produite. Veuillez réessayer.
        </div>

        <div class="form-group">
          <input type="text" [(ngModel)]="formData.name" name="name" placeholder="Votre nom" required class="form-input"
            [disabled]="isSubmitting">
        </div>

        <div class="form-group">
          <input type="email" [(ngModel)]="formData.email" name="email" placeholder="Votre email" required
            class="form-input" [disabled]="isSubmitting">
        </div>

        <div class="form-group">
          <textarea [(ngModel)]="formData.message" name="message" placeholder="Votre message" required
            class="form-textarea" rows="5" [disabled]="isSubmitting"></textarea>
        </div>

        <!-- Champ honeypot pour éviter le spam -->
        <input type="text" name="_gotcha" style="display:none">

        <button type="submit" class="submit-button" [disabled]="!contactForm.valid || isSubmitting"
          [class.loading]="isSubmitting">
          <span *ngIf="!isSubmitting">
            Envoyer le message
            <span class="button-arrow">→</span>
          </span>
          <span *ngIf="isSubmitting">
            <i class="fas fa-spinner fa-spin"></i>
            Envoi en cours...
          </span>
        </button>
      </form>
    </div>
  </div>
</section>